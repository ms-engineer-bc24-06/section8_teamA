# level24 ER図作成課題

    ## 課題

### **旅行予約テーブル**

| 予約番号 | 予約ユーザー番号 | ユーザー名 | ユーザータイプ番号 | ユーザータイプ番号 | チェックイン日 | チェックアウト日 | 決済番号 | 決済タイプ | 決済ステータス | ホテル番号 | ホテル名 |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 1 | 1 | Hitomi | 1 | ゲスト | 2022/7/12 | 2022/7/14 | 100 | クレジットカード | 完了 | 11 | ヒルトン |
| 2 | 2 | Sayoko | 2 | 会員 | 2022/8/16 | 2022/7/18 | 101 | 現地 | 未完了 | 22 | アパ |
| 3 | 3 | Takumi | 1 | ゲスト | 2022/9/1 | 2022/9/5 | 102 | 現地 | 未完了 | 33 | ミラコスタ |

### つぶやきテーブル

| 呟き番号 | 呟いたユーザー番号 | ユーザー名 | ユーザーメールアドレス | ユーザーフォロー数 | ユーザーフォロワー数 | 呟き | 呟いた日時 | いいね数 |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 1 | 1 | Hitomi | <Hitomi@mse.com> | 500 | 5000 | やるか！超やるか！！ | 2022/7/12 12:00 | 15 |
| 2 | 2 | Sayoko | <Sayoko@mse.com> | 100 | 2000 | モンブラン美味しい | 2022/8/16 8:20 | 120 |
| 3 | 3 | Takumi | <Takumi@mse.com> | 300 | 1000 | Zehi！ | 2022/9/1 22:45 | 10 |

1. **上記テーブルをそれぞれ正規化しよう**
2. **1で正規化したテーブル（データベース）のER図を作成してみよう**
3. **正規化したテーブルに必要な情報を追加したり、パターン分けをしてみよう**

    例えば、、、

    旅行予約テーブルの場合

    - ゲストと会員で予約フローは同じ、、、？
    - 旅行にキャンセルが出た場合は？
    - クーポンや値引きキャンペーンはあるかな、、、？

    つぶやきテーブルの場合

    - フォローフォロワー数はわかるけど、ユーザーがわからないですね、、？
    - 誰かがコメントしたい場合は？
    - DM機能はあるかな、、、？

    **そのほかにもたくさん考慮できますね！あなたが考える必要なデータテーブルやパターンを追加してみてください！**

作成したER図がわかるように提出をお願いします。



# 下記のリンクへアクセスしてください。

    [ER図](https://drive.google.com/file/d/1Kaa619_vQ-4FhltawX30SB9g40cdSueU/view?usp=sharing)

    - 各シートの説明
        - 「travel_er_1」： 旅行予約テーブルを正規化 => データベースのER図

        - 「travel_er_2」： 上記のシートに、以下を追加。
            - Usersに、passwordアトリビュートを追加して、ログイン情報を保存。
            - キャンセルテーブルを追加。（キャンセル理由データを蓄積することで、サービス向上に役立てる。）
            - クーポンテーブルを追加。（会員ランクによって、クーポン割引率が異なる。）

        - 「tweet_er_1」： つぶやきテーブルを正規化 => データベースのER図

        - 「tweet_er_2」： 上記のシートに、以下を追加。
            - Usersに、passwordアトリビュートを追加して、ログイン情報を保存。
            - Relationテーブルを追加することで、フォローフォロワーのユーザーがわかるように変更。
            - コメントテーブルを追加し、つぶやきに対してコメントができるように変更。
            - DMテーブルとroomテーブル（中間テーブル）を追加し、DM機能を追加。
            - favoriteテーブル（中間テーブル）を追加することで、TweetとCommentに、いいね！機能を追加。


## 参考サイト
    [【初心者向け】丁寧すぎるRails『アソシエーション』チュートリアル【幾ら何でも】【完璧にわかる】](https://qiita.com/kazukimatsumoto/items/14bdff681ec5ddac26d1#%E3%83%AD%E3%82%B0%E3%82%A4%E3%83%B3%E6%A9%9F%E8%83%BD%E3%81%A8%E3%83%84%E3%82%A4%E3%83%BC%E3%83%88%E6%A9%9F%E8%83%BD%E3%82%92er%E5%9B%B3%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E8%A8%AD%E8%A8%88%E3%81%97%E3%82%88%E3%81%86)

    [相互フォローのDM機能](https://zenn.dev/yayu1303/articles/a9a97c64175493)
